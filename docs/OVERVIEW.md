# 🍶 酒類進口貿易管理系統 - 總體需求文件

## 📖 背景說明
小白慣老闆經營酒類進口貿易，目前使用ERP+GAS+LINE BOT系統，希望升級到現代化全端平台。

### 核心商業模式
1. **投資合作**: 投資方出錢，老闆負責營運，獲利分潤
2. **個人調貨**: 老闆用個人資金進貨，獨立獲利
3. **雙重價格**: 投資方看到的價格 vs 實際收取價格
4. **成本精算**: 解決進口稅務、抽檢、匯損等複雜成本計算

## 🎯 系統目標
- **數據隔離**: 投資方與個人調貨完全分離
- **成本精算**: 精確計算真實進口成本
- **AI自動化**: 報單辨識減少手動作業
- **LINE整合**: 保持台灣人習慣的LINE操作
- **簡化記帳**: 老闆友善的記帳介面

## 👥 使用者角色
### 🦸‍♂️ 超級管理員 (老闆)
- 全系統存取權限
- 看到所有真實數據
- 管理投資方與個人調貨

### 💼 投資方
- 限定範圍存取
- 只看投資項目的調整價格
- 不能看到真實銷售價格和個人調貨

### 👷‍♀️ 一般員工
- 基本操作權限
- 不涉及獲利分析

## 💰 雙重價格機制
```
投資方視角：成本800 → 銷售1000 → 獲利200
實際情況：成本800 → 實收1200 → 分潤1000 + 抽成200
```

**關鍵**: 投資方永遠看不到1200的真實金額！

## 📦 模組架構
1. **🔐 Auth模組** - 認證權限
2. **👥 User模組** - 使用者管理
3. **🏠 Dashboard模組** - 首頁儀表板
4. **👤 Customer模組** - 客戶管理
5. **🍶 Product模組** - 商品變體管理
6. **🛒 Purchase模組** - 採購+AI辨識
7. **📦 Inventory模組** - 進貨+庫存+調撥
8. **💸 Sales模組** - 銷貨+雙重價格
9. **💳 Accounting模組** - 對帳+開銷管理
10. **📈 Report模組** - 報表分析
11. **🤖 LineBot模組** - BOT整合

## 🚀 開發階段
- **Phase 1**: 核心基礎 (Auth + User + Dashboard)
- **Phase 2**: 主檔管理 (Customer + Product)
- **Phase 3**: 核心交易 (Purchase + Inventory + Sales)
- **Phase 4**: 進階功能 (Accounting + Report + LineBot)

## ⚠️ 安全要求
- 資料庫層級權限控制
- API端點權限驗證
- 敏感資料加密存放
- 投資方數據完全隔離

## 📱 LINE BOT功能
- 即時成本計算
- 報價記錄管理
- 智慧提醒推送
- 外出臨時查詢

## 🧮 成本計算邏輯
使用現有GAS系統的計算引擎：
- 關稅 + 菸酒稅 + 推廣費 + 營業稅
- 抽檢損耗成本分攤
- 匯率波動處理
- 額外費用分攤

詳細計算公式參考 `DEMO.txt`。