# 📊 Room-5: 報表分析房間

## 🎯 任務概述
**負責模組**: Report模組
**螞蟻配置**: 2隻螞蟻 (1監督 + 1實作)
**預計時間**: 2-3週
**優先級**: 🟠 中優先級

## 📋 主要任務

### **核心功能**
- 🎯 多維度報表系統
- 📈 圖表視覺化 (Chart.js/Recharts)
- 🔍 投資方數據過濾
- 🏠 營運儀表板
- 📤 匯出功能 (Excel/PDF)

### **關鍵特點**
- **數據隔離**: 投資方只能看到有限數據
- **即時更新**: 報表數據需要即時反映
- **多格式匯出**: 支援Excel、PDF、CSV格式
- **權限控制**: 依角色顯示不同報表

## 🔒 安全要求

### **投資方數據過濾**
- 永遠看不到真實銷售價格
- 永遠看不到老闆傭金
- 永遠看不到個人調貨數據
- 只能看到投資項目的display price

### **超級管理員視圖**
- 完整營運數據
- 實際vs顯示價格對比
- 傭金分析
- 個人調貨獲利

## 📊 報表類型

### **1. 營收報表**
- 總營收 (分投資方/個人)
- 毛利分析
- 傣金統計
- 月度趨勢

### **2. 商品報表**
- 商品銷售排行
- 庫存周轉率
- 毛利率分析
- 滯銷商品統計

### **3. 客戶報表**
- 客戶消費統計
- 付款期限分析
- 客戶分級效果
- 欠款追蹤

### **4. 成本報表**
- 進口成本分析
- 稅金統計
- 開銷分攤
- 匯率影響

## 🛠️ 技術要求

### **前端技術**
- Chart.js 或 Recharts 圖表庫
- 響應式設計 (手機也要好看)
- 列印友善樣式
- Excel/PDF 匯出功能

### **後端技術**
- 報表數據聚合API
- 權限過濾中間件
- 快取機制 (大量數據)
- 匯出服務

## 🐜 螞蟻分工建議

### **監督螞蟻**
- 負責數據過濾邏輯驗證
- 檢查權限控制是否正確
- 測試投資方數據隔離
- 整合測試和代碼審查

### **實作螞蟻**
- 開發報表API和前端組件
- 實現圖表視覺化
- 開發匯出功能
- 基礎功能測試

## 📝 交付清單

### **必要交付物**
- [ ] 報表API (/api/reports/*)
- [ ] 報表前端組件
- [ ] 圖表組件庫
- [ ] 權限過濾中間件
- [ ] 匯出功能
- [ ] 響應式樣式

### **測試要求**
- [ ] 功能測試通過
- [ ] 權限測試通過 ⚠️重要
- [ ] 數據隔離驗證 ⚠️關鍵
- [ ] 匯出功能測試
- [ ] 手機版面測試

## ⚠️ 注意事項

1. **數據隔離是最高優先級**，絕對不能讓投資方看到真實數據
2. **報表效能**要好，大量數據要有分頁和快取
3. **匯出功能**要穩定，不能因為數據多就當機
4. **手機版**也要能正常使用
5. **依賴Room-1,2,3,4**的數據，要等前置房間完成

## 🎉 成功標準
- 所有報表功能正常運行
- 投資方數據隔離100%正確
- 匯出功能穩定可用
- 手機版使用體驗良好
- 代碼品質符合規範

**歡迎入住Room-5！讓我們打造最棒的報表系統！** 📊✨