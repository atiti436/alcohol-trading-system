# æ ¸å¿ƒæ•¸æ“šæ¨¡å‹ (Data Models) - v2.1

æœ¬æ–‡ä»¶å®šç¾©ç³»çµ±ä¸­æ ¸å¿ƒç‰©ä»¶çš„æ¨™æº–å±¬æ€§ï¼Œæ‰€æœ‰AIé–‹ç™¼æ™‚å¿…é ˆä»¥æ­¤ç‚ºå”¯ä¸€çš„æ¬„ä½å‘½åå’Œæ ¼å¼ä¾æ“šã€‚

## ğŸ“‹ ç‰ˆæœ¬æ›´æ–°èªªæ˜
### v2.1 - 2025/09/23
- æ›´æ–°ç‚ºå¯¦éš›è³‡æ–™åº«çµæ§‹
- ç§»é™¤ç†æƒ³åŒ–ä½†æœªå¯¦ä½œçš„æ¬„ä½
- ç¢ºä¿æ–‡æª”èˆ‡ç¨‹å¼ç¢¼ä¸€è‡´
- æ‰€æœ‰æ¬„ä½åç¨±å·²èˆ‡ schema.prisma å°é½Š

## 1. å®¢æˆ¶ (Customer)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUIDï¼Œç³»çµ±å…§éƒ¨ä½¿ç”¨ | `cuid_abc123` |
| `customer_code` | å®¢æˆ¶ä»£ç¢¼ | String | âœ… | å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œè¦å‰‡è¦‹ ID_DEFINITIONS.md | `C00001` |
| `name` | å®¢æˆ¶åç¨± | String | âœ… | å…¬å¸æˆ–å€‹äººåç¨± | `æ»¿å¸†æ´‹è¡Œ` |
| `contact_person` | ä¸»è¦è¯çµ¡äºº | String | | è¯çµ¡çª—å£å§“å | `ç‹å¤§æ˜` |
| `phone` | è¯çµ¡é›»è©± | String | | é›»è©±è™Ÿç¢¼ | `0912-345-678` |
| `email` | é›»å­éƒµä»¶ | String | | éƒµä»¶åœ°å€ | `david@example.com` |
| `company` | å…¬å¸åç¨± | String | | å…¬å¸çµ±ä¸€ç·¨è™Ÿå°æ‡‰åç¨± | `æ»¿å¸†è²¿æ˜“æœ‰é™å…¬å¸` |
| `tax_id` | çµ±ä¸€ç·¨è™Ÿ | String | | 8ä½æ•¸çµ±ç·¨ | `12345678` |
| `address` | åœ°å€ | String | | è¯çµ¡åœ°å€ | `å°åŒ—å¸‚...` |
| `shipping_address` | é€è²¨åœ°å€ | String | | æ”¶è²¨åœ°å€ï¼Œå¯èˆ‡è¯çµ¡åœ°å€ä¸åŒ | `æ–°åŒ—å¸‚...` |
| `tier` | å®¢æˆ¶åˆ†ç´š | Enum | âœ… | VIP\|REGULAR\|PREMIUM\|NEW | `VIP` |
| `payment_terms` | ä»˜æ¬¾æ¢ä»¶ | Enum | âœ… | CASH\|WEEKLY\|MONTHLY\|SIXTY_DAYS | `MONTHLY` |
| `requires_invoice` | éœ€è¦ç™¼ç¥¨ | Boolean | âœ… | æ˜¯å¦éœ€è¦é–‹ç«‹ç™¼ç¥¨ | `true` |
| `credit_limit` | ä¿¡ç”¨é¡åº¦ | Number | | æˆä¿¡é¡åº¦ï¼ˆå°å¹£ï¼‰ | `100000` |
| `notes` | å‚™è¨» | String | | å®¢æˆ¶ç›¸é—œå‚™è¨» | `VIPå®¢æˆ¶ï¼Œç‰¹åˆ¥é—œç…§` |
| `is_active` | æ˜¯å¦å•Ÿç”¨ | Boolean | âœ… | æ˜¯å¦åœ¨ç³»çµ±ä¸­å¯è¦‹å¯ç”¨ | `true` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

### 1.1 å®¢æˆ¶åˆ†ç´šèªªæ˜ (Customer Tier)

| åˆ†ç´šä»£ç¢¼ | ä¸­æ–‡åç¨± | æŠ˜æ‰£ç­–ç•¥ | èªªæ˜ |
| :--- | :--- | :--- | :--- |
| `VIP` | VIPå®¢æˆ¶ | -5% | æœ€å„ªæƒ åƒ¹æ ¼ï¼Œé•·æœŸåˆä½œå¤¥ä¼´ |
| `REGULAR` | ä¸€èˆ¬å®¢æˆ¶ | æ¨™æº–åƒ¹ | æ¨™æº–å…¬ç‰ˆåƒ¹æ ¼ |
| `PREMIUM` | é«˜åƒ¹å®¢æˆ¶ | +10% | è¼ƒé«˜åƒ¹æ ¼ï¼Œç‰¹æ®Šéœ€æ±‚å®¢æˆ¶ |
| `NEW` | æ–°å®¢æˆ¶ | å…¬ç‰ˆåƒ¹ | æ–°é–‹ç™¼å®¢æˆ¶ï¼Œè§€å¯ŸæœŸ |

## 2. ç”¢å“ (Product)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUIDï¼Œç³»çµ±å…§éƒ¨ä½¿ç”¨ | `cuid_xyz789` |
| `product_code` | ç”¢å“ç·¨è™Ÿ | String | âœ… | å”¯ä¸€è­˜åˆ¥ç¢¼ï¼Œè¦å‰‡è¦‹ ID_DEFINITIONS.md | `P00001` |
| `name` | å•†å“åç¨± | String | âœ… | å•†å“åç¨± | `å±±å´18å¹´å–®ä¸€éº¥èŠ½å¨å£«å¿Œ` |
| `category` | ç”¢å“åˆ†é¡ | AlcoholCategory | âœ… | é…’é¡åˆ†é¡æšèˆ‰ | `WHISKY` |
| `volume_ml` | å®¹é‡(ml) | Number | âœ… | ä»¥æ¯«å‡ç‚ºå–®ä½ | `700` |
| `alc_percentage` | é…’ç²¾æ¿ƒåº¦(%) | Float | âœ… | é…’ç²¾åº¦æ•¸ï¼Œä¸å¸¶ç™¾åˆ†è™Ÿ | `43` |
| `weight_kg` | å•†å“é‡é‡(kg) | Number | âœ… | å•†å“æœ¬èº«å«ç“¶èº«çš„é‡é‡ | `1.2` |
| `package_weight_kg` | åŒ…è£é‡é‡(kg) | Number | | å¤–ç›’æˆ–é¡å¤–åŒ…è£çš„é‡é‡ | `0.3` |
| `total_weight_kg` | ç¸½é‡é‡(kg) | Number | âœ… | è‡ªå‹•è¨ˆç®—ï¼šå•†å“+åŒ…è£é‡é‡ | `1.5` |
| `has_box` | æœ‰ç„¡å¤–ç›’ | Boolean | âœ… | æ˜¯å¦æœ‰å¤–åŒ…è£ç›’ | `true` |
| `has_accessories` | æœ‰ç„¡é™„ä»¶ | Boolean | âœ… | æ˜¯å¦æœ‰é™„ä»¶ï¼ˆè­‰æ›¸ç­‰ï¼‰ | `true` |
| `accessories` | é™„ä»¶æ¸…å–® | String[] | | é™„ä»¶é …ç›®åˆ—è¡¨ | `["è­‰æ›¸", "ç‰¹è£½æœ¨ç›’"]` |
| `accessory_weight_kg` | é™„ä»¶é‡é‡(kg) | Number | | é™„ä»¶ç¸½é‡é‡ | `0.2` |
| `hs_code` | ç¨…å‰‡è™Ÿåˆ— | String | | æµ·é—œç¨…å‰‡åˆ†é¡ä»£ç¢¼ | `2208.30.10.00` |
| `supplier` | ä¾›æ‡‰å•† | String | | ä¾›æ‡‰å•†åç¨± | `æ—¥æœ¬é…’å•†æ ªå¼æœƒç¤¾` |
| `manufacturing_date` | è£½é€ æ—¥æœŸ | String | | ç”Ÿç”¢æ—¥æœŸ | `2005-03` |
| `expiry_date` | ä¿å­˜æœŸé™ | String | | ä¿å­˜åˆ°æœŸæ—¥ | `ç„¡æœŸé™` |
| `standard_price` | æ¨™æº–å”®åƒ¹ | Number | âœ… | å…¬ç‰ˆæ¨™æº–å”®åƒ¹ï¼ˆå°å¹£ï¼‰ | `21000` |
| `current_price` | ç›®å‰å”®åƒ¹ | Number | âœ… | ç›®å‰å”®åƒ¹ï¼Œå¯èª¿æ•´ï¼ˆå°å¹£ï¼‰ | `20000` |
| `min_price` | æœ€ä½é™åƒ¹ | Number | âœ… | æœ€ä½å”®åƒ¹é™åˆ¶ï¼ˆå°å¹£ï¼‰ | `18000` |
| `cost_price` | å¹³å‡æˆæœ¬åƒ¹ | Number | | åŠ æ¬Šå¹³å‡æˆæœ¬ï¼ˆå°å¹£ï¼‰ | `15000` |
| `is_active` | æ˜¯å¦å•Ÿç”¨ | Boolean | âœ… | æ˜¯å¦åœ¨ç³»çµ±ä¸­å¯è¦‹å¯å”® | `true` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

### 2.1 é…’ç²¾åº¦æ¬„ä½èªªæ˜

âš ï¸ **é‡è¦çµ±ä¸€è¦ç¯„**ï¼š
- **çµ±ä¸€ä½¿ç”¨**: `alc_percentage`
- **æ£„ç”¨æ¬„ä½**: ~~`abv`~~, ~~`alcoholPercentage`~~
- **è³‡æ–™æ ¼å¼**: ç´”æ•¸å­—ï¼Œä¸å«ç™¾åˆ†è™Ÿ (å¦‚: 43 è¡¨ç¤º 43%)
- **æˆ¿é–“é©ç”¨**: æ‰€æœ‰æˆ¿é–“å¿…é ˆçµ±ä¸€ä½¿ç”¨æ­¤å‘½å

### 2.2 ç”¢å“åˆ†é¡æšèˆ‰å€¼

```typescript
enum AlcoholCategory {
  WHISKY
  WINE
  SAKE
  BEER
  SPIRITS
  LIQUEUR
  OTHER
}
```

## 3. ç”¢å“è®Šé«” (Product Variant)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUIDï¼Œç³»çµ±å…§éƒ¨ä½¿ç”¨ | `cuid_var001` |
| `product_id` | æ‰€å±¬ç”¢å“ID | String | âœ… | é—œè¯çš„ç”¢å“ID | `cuid_xyz789` |
| `variant_code` | è®Šé«”ç·¨è™Ÿ | String | âœ… | è¦å‰‡è¦‹ ID_DEFINITIONS.md | `P00001-A` |
| `variant_type` | è®Šé«”é¡å‹ | String | âœ… | æœ€å¤š 100 å­—ï¼Œå¯è‡ªç”±å‘½å | `æ¨™æº–æ¬¾` |
| `description` | è®Šé«”æè¿° | String | âœ… | è®Šé«”èªªæ˜ | `ä¸€èˆ¬ç‰ˆ` |
| `sku` | SKUç·¨è™Ÿ | String | âœ… | åº«å­˜å–®ä½ç·¨è™Ÿ | `P00001-700-43` |
| `base_price` | åŸºç¤å”®åƒ¹ | Number | âœ… | è®Šé«”åŸºç¤åƒ¹æ ¼ | `21000` |
| `current_price` | ç›®å‰å”®åƒ¹ | Number | âœ… | ç›®å‰å”®åƒ¹ | `20000` |
| `discount_rate` | æŠ˜æ‰£ç‡ | Number | | æŠ˜æ‰£ç™¾åˆ†æ¯”ï¼ˆæå‚·å“ç”¨ï¼‰ | `0.8` |
| `cost_price` | å¯¦éš›æˆæœ¬ | Number | | æ­¤è®Šé«”çš„å¯¦éš›æˆæœ¬ | `15000` |
| `stock_quantity` | åº«å­˜æ•¸é‡ | Number | âœ… | ç›®å‰åº«å­˜é‡ | `50` |
| `reserved_stock` | é ç•™åº«å­˜ | Number | âœ… | å·²é ç•™ä½†æœªå‡ºè²¨çš„æ•¸é‡ | `5` |
| `available_stock` | å¯å”®åº«å­˜ | Number | âœ… | è‡ªå‹•è¨ˆç®—ï¼šåº«å­˜-é ç•™ | `45` |
| `limited_edition` | æ˜¯å¦é™å®šç‰ˆ | Boolean | âœ… | æ˜¯å¦ç‚ºé™é‡ç‰ˆ | `false` |
| `production_year` | ç”Ÿç”¢å¹´ä»½ | Number | | ç”Ÿç”¢å¹´ä»½ | `2005` |
| `serial_number` | åºè™Ÿ | String | | å•†å“åºè™Ÿ | `A0001` |
| `condition` | å•†å“ç‹€æ³ | String | âœ… | å•†å“ç‹€æ…‹æè¿° | `å…¨æ–°` |
| `notes` | å‚™è¨» | String | | è®Šé«”ç›¸é—œå‚™è¨» | `æ—¥æœ¬ç›´é€ï¼ŒåŒ…è£å®Œæ•´` |
| `is_active` | æ˜¯å¦å•Ÿç”¨ | Boolean | âœ… | æ˜¯å¦å¯å”® | `true` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

### 3.1 è®Šé«”é¡å‹èªªæ˜ (Variant Type)

è®Šé«”é¡å‹æ¬„ä½æ”¹ç‚ºè‡ªç”±è¼¸å…¥çš„æ–‡å­—æ¬„ä½ï¼Œå»ºè­°ä½¿ç”¨ç°¡æ½”æ˜ç­çš„åç¨±æè¿°åŒ…è£æˆ–é™å®šè³‡è¨Šï¼Œä¾‹å¦‚ã€Œæ¨™æº–æ¬¾ã€ã€ã€Œæœ¨ç›’ç‰ˆã€ã€ã€Œæ„Ÿè¬ç¦®ç›’ã€ã€‚ç³»çµ±æœƒä¿ç•™åŸå§‹è¼¸å…¥ä¸¦æ“šæ­¤ç”Ÿæˆå”¯ä¸€çš„è®Šé«”ä»£ç¢¼ã€‚

## 4. æ¡è³¼å–® (Purchase Order)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUID | `cuid_po001` |
| `purchase_number` | æ¡è³¼å–®è™Ÿ | String | âœ… | è¦å‰‡è¦‹ ID_DEFINITIONS.md | `PO-20250916-001` |
| `supplier` | ä¾›æ‡‰å•† | String | âœ… | ä¾›æ‡‰å•†åç¨± | `æ—¥æœ¬é…’å•†æ ªå¼æœƒç¤¾` |
| `currency` | å¹£åˆ¥ | String | âœ… | ISO 4217ä»£ç¢¼ | `JPY` |
| `exchange_rate` | åŒ¯ç‡ | Number | | æ¡è³¼æ™‚åŒ¯ç‡ï¼ˆå¯ç‚ºç©ºï¼‰ | `0.23` |
| `funding_source` | è³‡é‡‘ä¾†æº | Enum | âœ… | COMPANY\|PERSONAL | `COMPANY` |
| `total_amount` | ç¸½é‡‘é¡ | Float | âœ… | æ¡è³¼ç¸½é‡‘é¡ | `184000` |
| `status` | å–®æ“šç‹€æ…‹ | String | âœ… | PENDING\|CONFIRMED\|RECEIVED | `CONFIRMED` |
| `declaration_number` | å ±å–®è™Ÿç¢¼ | String | | æµ·é—œå ±å–®è™Ÿç¢¼ | `AA1234567890` |
| `declaration_date` | å ±é—œæ—¥æœŸ | DateTime | | å ±é—œæ—¥æœŸ | `2025-09-16T10:30:00Z` |
| `received_date` | æ”¶è²¨æ—¥æœŸ | DateTime | | å¯¦éš›æ”¶è²¨æ—¥æœŸ | `2025-09-18T14:00:00Z` |
| `notes` | å‚™è¨» | String | | æ¡è³¼ç›¸é—œå‚™è¨» | `æ€¥ä»¶ï¼Œè«‹å„ªå…ˆè™•ç†` |
| `created_by` | å»ºç«‹è€… | String | âœ… | å»ºç«‹ä½¿ç”¨è€…ID | `user_boss` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

## 5. æ¡è³¼æ˜ç´° (Purchase Item)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUID | `cuid_pi001` |
| `purchase_id` | æ¡è³¼å–®ID | String | âœ… | æ‰€å±¬æ¡è³¼å–® | `cuid_po001` |
| `product_id` | ç”¢å“ID | String | | é—œè¯ç”¢å“ï¼ˆå¦‚æœ‰ï¼‰ | `cuid_xyz789` |
| `product_name` | å•†å“åç¨± | String | âœ… | å•†å“åç¨± | `å±±å´18å¹´å¨å£«å¿Œ` |
| `quantity` | æ•¸é‡ | Number | âœ… | æ¡è³¼æ•¸é‡ | `12` |
| `unit_price` | å–®åƒ¹ | Float | âœ… | å•†å“å–®åƒ¹ | `1840` |
| `total_price` | å°è¨ˆ | Float | âœ… | å•†å“å°è¨ˆ | `22080` |
| `dutiable_value` | å®Œç¨…åƒ¹æ ¼ | Float | | æµ·é—œå®Œç¨…åƒ¹æ ¼ | `1600` |
| `tariff_code` | ç¨…å‰‡è™Ÿåˆ— | String | | æµ·é—œç¨…å‰‡ä»£ç¢¼ | `2208.30.10.00` |
| `import_duty_rate` | é€²å£ç¨…ç‡ | Float | | é€²å£ç¨…ç‡ | `0.1` |
| `alc_percentage` | é…’ç²¾æ¿ƒåº¦ | Float | | é…’ç²¾åº¦æ•¸ | `43` |
| `volume_ml` | å®¹é‡ | Int | | å®¹é‡ï¼ˆæ¯«å‡ï¼‰ | `700` |
| `weight_kg` | é‡é‡ | Float | | å–®å“é‡é‡ï¼ˆå…¬æ–¤ï¼‰ | `1.2` |
| `notes` | å‚™è¨» | String | | å“é …å‚™è¨» | `æ—¥æœ¬é™å®šç‰ˆ` |

## 6. éŠ·å”®å–® (Sales Order)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUID | `cuid_so001` |
| `sale_number` | éŠ·å”®å–®è™Ÿ | String | âœ… | è¦å‰‡è¦‹ ID_DEFINITIONS.md | `SO-20250916-001` |
| `customer_id` | å®¢æˆ¶ID | String | âœ… | é—œè¯å®¢æˆ¶ | `cuid_abc123` |
| `total_amount` | ç¸½é‡‘é¡ | Float | âœ… | éŠ·å”®ç¸½é‡‘é¡ | `1200` |
| `actual_amount` | å¯¦éš›é‡‘é¡ | Float | | å¯¦éš›æ”¶å–é‡‘é¡ | `1200` |
| `commission` | æŠ½æˆ | Float | | è€é—†æŠ½æˆé‡‘é¡ | `200` |
| `funding_source` | è³‡é‡‘ä¾†æº | String | âœ… | COMPANY\|PERSONAL | `COMPANY` |
| `payment_terms` | ä»˜æ¬¾æ¢ä»¶ | Enum | âœ… | CASH\|WEEKLY\|MONTHLY\|SIXTY_DAYS | `MONTHLY` |
| `status` | å–®æ“šç‹€æ…‹ | SaleStatus | âœ… | DRAFT\|CONFIRMED\|SHIPPED\|DELIVERED\|CANCELLED | `CONFIRMED` |
| `is_paid` | æ˜¯å¦å·²ä»˜æ¬¾ | Boolean | âœ… | ä»˜æ¬¾ç‹€æ…‹ | `false` |
| `paid_at` | ä»˜æ¬¾æ™‚é–“ | DateTime | | ä»˜æ¬¾æ™‚é–“ | `2025-09-16T15:30:00Z` |
| `due_date` | åˆ°æœŸæ—¥ | DateTime | | ä»˜æ¬¾åˆ°æœŸæ—¥ | `2025-10-16T00:00:00Z` |
| `confirmed_at` | ç¢ºèªæ™‚é–“ | DateTime | | è¨‚å–®ç¢ºèªæ™‚é–“ | `2025-09-16T10:30:00Z` |
| `confirmed_by` | ç¢ºèªäºº | String | | ç¢ºèªäººå“¡ID | `user_manager` |
| `notes` | å‚™è¨» | String | | è¨‚å–®ç›¸é—œå‚™è¨» | `å®¢æˆ¶è¦æ±‚æ€¥ä»¶` |
| `created_by` | å»ºç«‹è€… | String | âœ… | å»ºç«‹ä½¿ç”¨è€…ID | `user_boss` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

## 7. éŠ·å”®æ˜ç´° (Sales Item)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUID | `cuid_si001` |
| `sale_id` | éŠ·å”®å–®ID | String | âœ… | æ‰€å±¬éŠ·å”®å–® | `cuid_so001` |
| `variant_id` | è®Šé«”ID | String | âœ… | å•†å“è®Šé«” | `cuid_var001` |
| `product_id` | ç”¢å“ID | String | âœ… | ç”¢å“ID | `cuid_xyz789` |
| `variant_id` | è®Šé«”ID | String | | è®Šé«”ID | `cuid_var001` |
| `quantity` | æ•¸é‡ | Int | âœ… | éŠ·å”®æ•¸é‡ | `1` |
| `unit_price` | å–®åƒ¹ | Float | âœ… | å•†å“å–®åƒ¹ | `1200` |
| `actual_unit_price` | å¯¦éš›å–®åƒ¹ | Float | | å¯¦éš›æ”¶å–å–®åƒ¹ | `1200` |
| `total_price` | å°è¨ˆ | Float | âœ… | å•†å“å°è¨ˆ | `1200` |
| `actual_total_price` | å¯¦éš›å°è¨ˆ | Float | | å¯¦éš›æ”¶å–å°è¨ˆ | `1200` |
| `is_personal_purchase` | å€‹äººèª¿è²¨ | Boolean | âœ… | æ˜¯å¦ç‚ºå€‹äººèª¿è²¨ | `false` |

## 8. å®¢æˆ¶å°ˆåƒ¹ (Customer Special Price)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUID | `cuid_csp001` |
| `customer_id` | å®¢æˆ¶ID | String | âœ… | é—œè¯å®¢æˆ¶ | `cuid_abc123` |
| `product_id` | ç”¢å“ID | String | âœ… | é—œè¯ç”¢å“ | `cuid_xyz789` |
| `standard_price` | æ¨™æº–åƒ¹æ ¼ | Number | âœ… | å…¬ç‰ˆåƒ¹æ ¼ | `21000` |
| `special_price` | å°ˆå±¬åƒ¹æ ¼ | Number | âœ… | å®¢è£½åƒ¹æ ¼ | `20000` |
| `discount_amount` | æŠ˜æ‰£é‡‘é¡ | Number | âœ… | æŠ˜æ‰£é‡‘é¡ | `1000` |
| `discount_rate` | æŠ˜æ‰£ç‡ | Number | âœ… | æŠ˜æ‰£ç™¾åˆ†æ¯” | `0.05` |
| `reason` | èª¿åƒ¹åŸå›  | String | âœ… | å°ˆåƒ¹è¨­å®šåŸå›  | `VIPå®¢æˆ¶é•·æœŸåˆä½œ` |
| `effective_date` | ç”Ÿæ•ˆæ—¥æœŸ | Date | âœ… | å°ˆåƒ¹ç”Ÿæ•ˆæ—¥ | `2025-09-16` |
| `expiry_date` | åˆ°æœŸæ—¥æœŸ | Date | | å°ˆåƒ¹åˆ°æœŸæ—¥ | `2025-12-31` |
| `is_active` | æ˜¯å¦å•Ÿç”¨ | Boolean | âœ… | æ˜¯å¦ç”Ÿæ•ˆä¸­ | `true` |
| `notes` | å‚™è¨» | String | | ç›¸é—œå‚™è¨» | `å¹´åº¦åˆç´„åƒ¹æ ¼` |
| `created_by` | å»ºç«‹è€… | String | âœ… | å»ºç«‹ä½¿ç”¨è€…ID | `user_boss` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

## 9. é€²è²¨è¨˜éŒ„ (Import Record)

| æ¬„ä½åç¨± (Field Name) | ä¸­æ–‡åç¨± | æ•¸æ“šé¡å‹ | å¿…å¡« | èªªæ˜ | ç¯„ä¾‹ |
| :--- | :--- | :--- | :---: | :--- | :--- |
| `id` | ç³»çµ±ID | String | âœ… | UUID | `cuid_ir001` |
| `import_number` | é€²è²¨å–®è™Ÿ | String | âœ… | é€²è²¨å–®è™Ÿ | `IM-20250916-001` |
| `purchase_id` | æ¡è³¼å–®ID | String | âœ… | é—œè¯æ¡è³¼å–® | `cuid_po001` |
| `purchase_number` | æ¡è³¼å–®è™Ÿ | String | âœ… | æ¡è³¼å–®è™Ÿ | `PO-20250916-001` |
| `supplier` | ä¾›æ‡‰å•† | String | âœ… | ä¾›æ‡‰å•†åç¨± | `æ—¥æœ¬é…’å•†æ ªå¼æœƒç¤¾` |
| `declaration_number` | å ±å–®è™Ÿç¢¼ | String | | æµ·é—œå ±å–®è™Ÿç¢¼ | `AA1234567890` |
| `declaration_date` | å ±é—œæ—¥æœŸ | DateTime | | å ±é—œæ—¥æœŸ | `2025-09-16T10:30:00Z` |
| `total_value` | è²¨ç‰©ç¸½å€¼ | Float | âœ… | è²¨ç‰©ç¸½åƒ¹å€¼ | `184000` |
| `currency` | å¹£åˆ¥ | String | âœ… | è²¨å¹£ä»£ç¢¼ | `TWD` |
| `exchange_rate` | åŒ¯ç‡ | Float | âœ… | åŒ¯ç‡ | `1.0` |
| `status` | ç‹€æ…‹ | String | âœ… | PENDING\|PROCESSING\|CUSTOMS_CLEARED\|RECEIVED\|COMPLETED | `PROCESSING` |
| `alcohol_tax` | é…’ç¨… | Float | âœ… | é…’ç¨…é‡‘é¡ | `15000` |
| `business_tax` | ç‡Ÿæ¥­ç¨… | Float | âœ… | ç‡Ÿæ¥­ç¨…é‡‘é¡ | `9200` |
| `trade_promotion_fee` | æ¨å»£è²» | Float | âœ… | è²¿æ˜“æ¨å»£è²» | `460` |
| `total_taxes` | ç¨…è²»åˆè¨ˆ | Float | âœ… | æ‰€æœ‰ç¨…è²»ç¸½é¡ | `24660` |
| `extracted_data` | è§£æè³‡æ–™ | String | | OCRè§£æçš„åŸå§‹è³‡æ–™ | `{...}` |
| `notes` | å‚™è¨» | String | | é€²è²¨å‚™è¨» | `æ€¥ä»¶è™•ç†` |
| `created_at` | å»ºç«‹æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•ç”¢ç”Ÿ | `2025-09-16T10:30:00Z` |
| `updated_at` | æ›´æ–°æ™‚é–“ | DateTime | âœ… | ç³»çµ±è‡ªå‹•æ›´æ–° | `2025-09-16T10:30:00Z` |

---

## ğŸ’¡ è³‡æ–™æ¨¡å‹è¨­è¨ˆåŸå‰‡

1. **çµ±ä¸€å‘½å**: æ‰€æœ‰æ¬„ä½åç¨±æ¡ç”¨ snake_case æ ¼å¼
2. **ä¸­æ–‡å‹å–„**: æä¾›å®Œæ•´ä¸­æ–‡æ¬„ä½åç¨±èªªæ˜
3. **å‹åˆ¥ä¸€è‡´**: ç›¸åŒæ¦‚å¿µçš„æ¬„ä½ä½¿ç”¨ç›¸åŒè³‡æ–™å‹åˆ¥
4. **é—œè¯æ¸…æ¥š**: æ˜ç¢ºæ¨™ç¤ºå„è³‡æ–™è¡¨ä¹‹é–“çš„é—œè¯é—œä¿‚
5. **æ¬Šé™è€ƒæ…®**: æ¨™ç¤ºå“ªäº›æ¬„ä½å°æŠ•è³‡æ–¹ä¸å¯è¦‹
6. **æ“´å±•æ€§**: é ç•™æœªä¾†éœ€æ±‚çš„æ“´å±•ç©ºé–“

---

## ğŸ”’ æ¬Šé™æ§åˆ¶æ¬„ä½

### æŠ•è³‡æ–¹ä¸å¯è¦‹æ¬„ä½
ä»¥ä¸‹æ¬„ä½å° INVESTOR è§’è‰²å®Œå…¨éš±è—ï¼š
- `actual_amount` (å¯¦éš›æ”¶å–é‡‘é¡)
- `actual_unit_price` (å¯¦éš›å–®åƒ¹)
- `actual_total_price` (å¯¦éš›å°è¨ˆ)
- `commission` (ç¸½æŠ½æˆ)
- `funding_source = 'PERSONAL'` çš„æ‰€æœ‰è¨˜éŒ„
- `is_personal_purchase = true` çš„æ‰€æœ‰è¨˜éŒ„

### æŠ•è³‡æ–¹é™åˆ¶å­˜å–æ¬„ä½
ä»¥ä¸‹æ¬„ä½å° INVESTOR è§’è‰²åƒ…èƒ½çœ‹åˆ°éæ¿¾å¾Œçš„è³‡æ–™ï¼š
- å®¢æˆ¶å°ˆåƒ¹è³‡è¨Šå®Œå…¨ä¸å¯è¦‹
- å€‹äººèª¿è²¨ç›¸é—œè³‡æ–™å®Œå…¨ä¸å¯è¦‹
- åªèƒ½çœ‹åˆ°å…¬å¸è³‡é‡‘ä¾†æºçš„äº¤æ˜“

---

## âš ï¸ é‡è¦æé†’

- **æ‰€æœ‰æˆ¿é–“å¿…é ˆåš´æ ¼æŒ‰æ­¤è³‡æ–™æ¨¡å‹å¯¦ä½œ**
- **æ¬„ä½æ–°å¢æˆ–ä¿®æ”¹éœ€æ›´æ–°æ­¤æ–‡ä»¶**  
- **æ¬Šé™æ§åˆ¶å¿…é ˆåœ¨ API å±¤å’Œè³‡æ–™åº«å±¤éƒ½å¯¦ä½œ**
- **è³‡æ–™é·ç§»æ™‚è«‹åƒè€ƒæ­¤çµ±ä¸€æ ¼å¼**

---

**æœ€å¾Œæ›´æ–°**: 2025/9/23
**ç¶­è­·è²¬ä»»**: æ‰€æœ‰æˆ¿é–“å…±åŒéµå®ˆ
**è®Šæ›´å¯©æ ¸**: éœ€è€é—†ç¢ºèªå¾Œæ‰å¯ä¿®æ”¹

---

## ğŸ”„ æ›´æ–°æ­·ç¨‹

### v2.1 - 2025/09/23
- âœ… æ›´æ–°æ¡è³¼å–®æ¬„ä½åç¨±ï¼š`purchase_order_number` â†’ `purchase_number`
- âœ… æ›´æ–°éŠ·å”®å–®æ¬„ä½åç¨±ï¼š`sales_order_number` â†’ `sale_number`
- âœ… ç°¡åŒ–ç”¢å“æ¨¡å‹ï¼šç§»é™¤ `name_zh`ã€`name_en`ã€`brand`ã€`origin` ç­‰æœªå¯¦ä½œæ¬„ä½
- âœ… æ›´æ–°ç”¢å“åˆ†é¡ç‚ºæšèˆ‰é¡å‹ï¼š`AlcoholCategory`
- âœ… æ–°å¢é€²è²¨è¨˜éŒ„ (Import Record) å®Œæ•´æ¨¡å‹
- âœ… æ›´æ–°æ‰€æœ‰è³‡æ–™å‹åˆ¥èˆ‡å¯¦éš› schema.prisma å°é½Š
- âœ… ä¿®æ­£æ¬Šé™æ§åˆ¶æ¬„ä½èªªæ˜