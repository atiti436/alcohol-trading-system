# ğŸš¨ é˜²æ­¢é‡è¤‡éŒ¯èª¤æª¢æŸ¥æ¸…å–®

## âš ï¸ **å•é¡Œæ ¹æºåˆ†æ**

### **WHYæœƒé‡è¤‡çŠ¯éŒ¯ï¼Ÿ**
1. **çŸ¥é“ â‰  åŸ·è¡Œ** - å¯«äº†æ•™è¨“ä½†æ²’æœ‰å¼·åˆ¶åŸ·è¡Œ
2. **ç¯„åœä¼°è¨ˆä¸è¶³** - æ²’æœ‰ç³»çµ±æ€§åˆ†æå½±éŸ¿ç¯„åœ
3. **AIæ¨¡å¼åŒ¹é…å±€é™** - åªä¿®å¾©çœ‹åˆ°çš„éŒ¯èª¤ï¼Œæ²’æœ‰å…¨åŸŸæ€ç¶­
4. **ç¼ºä¹æª¢æŸ¥æ¸…å–®** - æ²’æœ‰æ¨™æº–åŒ–çš„é©—è­‰æµç¨‹
5. **æŒ‡ä»¤ç†è§£åå·®** - AIç†è§£ç‚º"ä¿®å¾©é€™å€‹"è€Œé"ä¿®å¾©é€™é¡"

---

## ğŸ“‹ **å¼·åˆ¶åŸ·è¡Œæª¢æŸ¥æ¸…å–®**

### **ğŸ¤– AI ç³»çµ±æ€§æ€ç¶­å¼·åˆ¶åŸ·è¡Œæ©Ÿåˆ¶**

#### **ç•¶èèŸ»çœ‹åˆ°ä»»ä½•éŒ¯èª¤æ™‚ï¼Œå¼·åˆ¶åŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼š**

**âŒ çµ•å°ç¦æ­¢çš„éŒ¯èª¤åšæ³•ï¼š**
```
çœ‹åˆ°éŒ¯èª¤ â†’ ç«‹å³ä¿®å¾©é€™å€‹éŒ¯èª¤ â†’ æäº¤ âŒ
```

**âœ… å¼·åˆ¶åŸ·è¡Œçš„æ­£ç¢ºåšæ³•ï¼š**
```bash
# æ­¥é©Ÿ1: åˆ†æéŒ¯èª¤æ¨¡å¼ï¼ˆå¿…é ˆåŸ·è¡Œï¼‰
echo "ğŸ” æ­¥é©Ÿ1: åˆ†æéŒ¯èª¤æ¨¡å¼..."

# æ­¥é©Ÿ2: å…¨åŸŸæœå°‹ç›¸åŒéŒ¯èª¤æ¨¡å¼ï¼ˆå¿…é ˆåŸ·è¡Œï¼‰
grep -rn "éŒ¯èª¤æ¨¡å¼" webapp/src/

# æ­¥é©Ÿ3: è¨˜éŒ„æ‰€æœ‰æ‰¾åˆ°çš„å¯¦ä¾‹ï¼ˆå¿…é ˆåŸ·è¡Œï¼‰
echo "ğŸ“‹ æ‰¾åˆ°ä»¥ä¸‹ç›¸åŒéŒ¯èª¤å¯¦ä¾‹ï¼š"
grep -rn "éŒ¯èª¤æ¨¡å¼" webapp/src/ | wc -l
echo "ç¸½å…±éœ€è¦ä¿®å¾©çš„åœ°æ–¹: $(grep -rn 'éŒ¯èª¤æ¨¡å¼' webapp/src/ | wc -l) è™•"

# æ­¥é©Ÿ4: æ‰¹é‡ä¿®å¾©æ‰€æœ‰å¯¦ä¾‹ï¼ˆå¿…é ˆåŸ·è¡Œï¼‰
# é€ä¸€ä¿®å¾©æ¯å€‹æ‰¾åˆ°çš„éŒ¯èª¤

# æ­¥é©Ÿ5: å†æ¬¡é©—è­‰ç„¡éºæ¼ï¼ˆå¿…é ˆåŸ·è¡Œï¼‰
grep -rn "éŒ¯èª¤æ¨¡å¼" webapp/src/
echo "ğŸ¯ å¦‚æœæœ‰ä»»ä½•è¼¸å‡ºï¼Œè¡¨ç¤ºé‚„æœ‰éºæ¼ï¼"
```

### **ğŸ” ç¬¬ä¸€æ­¥ï¼šè³‡æ–™åº«æ¨¡å‹è®Šæ›´æª¢æŸ¥**
ç•¶ä¿®æ”¹ä»»ä½• Prisma æ¨¡å‹æ™‚ï¼Œ**å¿…é ˆåŸ·è¡Œ**ï¼š

```bash
# 1. å…¨åŸŸæœå°‹èˆŠæ¬„ä½åç¨±
grep -r "èˆŠæ¬„ä½å" webapp/src/

# 2. æœå°‹æ¨¡å‹ç›¸é—œçš„å‰µå»ºå’ŒæŸ¥è©¢
grep -r "ModelName.create\|ModelName.aggregate\|ModelName.groupBy" webapp/src/

# 3. æœå°‹é¡å‹å¼•ç”¨
grep -r "ModelNameCreateInput\|ModelNameWhereInput" webapp/src/
```

### **ğŸ”§ ç¬¬äºŒæ­¥ï¼šTypeScripté¡å‹æª¢æŸ¥**
```bash
# 1. é‡æ–°ç”Ÿæˆ Prisma Client
npx prisma generate

# 2. å®Œæ•´ç·¨è­¯æª¢æŸ¥
npm run build

# 3. æ¬„ä½å‘½åæª¢æŸ¥
npm run check:fields
```

### **ğŸ“ ç¬¬ä¸‰æ­¥ï¼šå½±éŸ¿ç¯„åœåˆ†æ**
å°æ–¼ InventoryMovement æ¨¡å‹è®Šæ›´ï¼Œæª¢æŸ¥ï¼š
- [ ] `inventoryMovement.create` - æ‰€æœ‰å‰µå»ºé»
- [ ] `inventoryMovement.aggregate` - æ‰€æœ‰èšåˆæŸ¥è©¢
- [ ] `inventoryMovement.groupBy` - æ‰€æœ‰åˆ†çµ„æŸ¥è©¢
- [ ] `_sum`, `_avg`, `_count` - æ‰€æœ‰çµ±è¨ˆæŸ¥è©¢
- [ ] API å›æ‡‰æ¬„ä½ - å‰ç«¯é¡¯ç¤ºæ¬„ä½

---

## ğŸ¯ **æ¨™æº–åŒ–ä¿®å¾©æµç¨‹**

### **Step 1: åœæ­¢æ€¥æ–¼ä¿®å¾©**
âŒ **éŒ¯èª¤åšæ³•**: çœ‹åˆ°éŒ¯èª¤ â†’ ç«‹åˆ»ä¿® â†’ ç«‹åˆ»æ¨é€
âœ… **æ­£ç¢ºåšæ³•**: çœ‹åˆ°éŒ¯èª¤ â†’ åˆ†æç¯„åœ â†’ å…¨åŸŸæª¢æŸ¥ â†’ ä¸€æ¬¡ä¿®å®Œ

### **Step 2: å»ºç«‹å½±éŸ¿ç¯„åœåœ°åœ–**
```
InventoryMovement æ¨¡å‹è®Šæ›´å½±éŸ¿ï¼š
â”œâ”€â”€ API å‰µå»º (3å€‹æª”æ¡ˆ)
â”‚   â”œâ”€â”€ inventory/route.ts
â”‚   â”œâ”€â”€ purchases/[id]/receive/route.ts
â”‚   â””â”€â”€ sales/[id]/ship/route.ts
â”œâ”€â”€ API æŸ¥è©¢ (2å€‹æª”æ¡ˆ)
â”‚   â”œâ”€â”€ inventory/movements/route.ts
â”‚   â””â”€â”€ reports/route.ts
â””â”€â”€ å‰ç«¯é¡¯ç¤ºæ¬„ä½
    â””â”€â”€ æ‰€æœ‰ä½¿ç”¨åº«å­˜ç•°å‹•çš„UIçµ„ä»¶
```

### **Step 3: æ‰¹æ¬¡ä¿®æ­£ç¢ºèª**
- [ ] æ‰€æœ‰APIæª”æ¡ˆä¿®æ­£å®Œæˆ
- [ ] æœ¬æ©Ÿç·¨è­¯ç„¡éŒ¯èª¤
- [ ] æ¬„ä½å‘½åæª¢æŸ¥é€šé
- [ ] Prisma Clienté‡æ–°ç”Ÿæˆ
- [ ] ä¸€æ¬¡æ€§æ¨é€

---

## ğŸ¤– **è‡ªå‹•åŒ–æª¢æŸ¥è…³æœ¬**

### **1. InventoryMovement å®Œæ•´æª¢æŸ¥è…³æœ¬**
```bash
#!/bin/bash
# check-inventory-movement.sh

echo "ğŸ” æª¢æŸ¥ InventoryMovement ç›¸é—œéŒ¯èª¤..."
echo "=========================================="

echo "âŒ æª¢æŸ¥æ˜¯å¦ä½¿ç”¨èˆŠæ¬„ä½ 'quantity'ï¼š"
grep -rn "quantity.*:" webapp/src/ | grep -v "quantity_before\|quantity_change\|quantity_after" | grep "inventoryMovement\|InventoryMovement"

echo ""
echo "ğŸ“‹ æª¢æŸ¥ create æ“ä½œæ˜¯å¦ä½¿ç”¨æ­£ç¢ºæ¬„ä½ï¼š"
grep -rn "inventoryMovement\.create\|InventoryMovement.*create" webapp/src/ -A 10 | grep -E "quantity[^_]|previous_stock|new_stock"

echo ""
echo "ğŸ“Š æª¢æŸ¥ _sum/_avg èšåˆæ˜¯å¦ä½¿ç”¨æ­£ç¢ºæ¬„ä½ï¼š"
grep -rn "_sum.*quantity[^_]\|_avg.*quantity[^_]" webapp/src/

echo ""
echo "ğŸ”§ æª¢æŸ¥æ­£ç¢ºæ¬„ä½ä½¿ç”¨ç‹€æ³ï¼š"
echo "âœ… quantity_before ä½¿ç”¨æ¬¡æ•¸: $(grep -r "quantity_before" webapp/src/ | wc -l)"
echo "âœ… quantity_change ä½¿ç”¨æ¬¡æ•¸: $(grep -r "quantity_change" webapp/src/ | wc -l)"
echo "âœ… quantity_after ä½¿ç”¨æ¬¡æ•¸: $(grep -r "quantity_after" webapp/src/ | wc -l)"

echo ""
echo "ğŸš¨ å¦‚æœ‰ä»»ä½•éŒ¯èª¤è¼¸å‡ºï¼Œè¡¨ç¤ºä»æœ‰èˆŠæ¬„ä½ä½¿ç”¨ï¼"
```

### **2. æ¬„ä½å‘½åä¸€è‡´æ€§æª¢æŸ¥**
```bash
#!/bin/bash
# check-field-naming.sh

echo "ğŸ” æª¢æŸ¥æ¬„ä½å‘½åä¸€è‡´æ€§..."
echo "=========================================="

echo "âŒ æª¢æŸ¥ camelCase vs snake_case ä¸ä¸€è‡´ï¼š"
grep -rn "variantCode\|productCode\|saleNumber" webapp/src/ | grep -v "// TODO"

echo ""
echo "âœ… æª¢æŸ¥æ­£ç¢ºçš„ snake_case ä½¿ç”¨ï¼š"
echo "variant_code ä½¿ç”¨æ¬¡æ•¸: $(grep -r "variant_code" webapp/src/ | wc -l)"
echo "product_code ä½¿ç”¨æ¬¡æ•¸: $(grep -r "product_code" webapp/src/ | wc -l)"
echo "sale_number ä½¿ç”¨æ¬¡æ•¸: $(grep -r "sale_number" webapp/src/ | wc -l)"
```

### **3. å®Œæ•´é æäº¤æª¢æŸ¥è…³æœ¬**
```bash
#!/bin/bash
# pre-commit-check.sh

echo "ğŸš€ åŸ·è¡Œå®Œæ•´é æäº¤æª¢æŸ¥..."
echo "=========================================="

# 1. Prisma Client é‡æ–°ç”Ÿæˆ
echo "ğŸ”§ é‡æ–°ç”Ÿæˆ Prisma Client..."
cd webapp && npx prisma generate

# 2. åŸ·è¡Œæ¬„ä½æª¢æŸ¥
echo "ğŸ” åŸ·è¡Œæ¬„ä½å‘½åæª¢æŸ¥..."
./check-field-naming.sh

# 3. åŸ·è¡Œ InventoryMovement æª¢æŸ¥
echo "ğŸ” åŸ·è¡Œ InventoryMovement æª¢æŸ¥..."
./check-inventory-movement.sh

# 4. TypeScript ç·¨è­¯æª¢æŸ¥
echo "ğŸ“ åŸ·è¡Œ TypeScript ç·¨è­¯..."
npm run build

# 5. æœ€çµ‚çµæœ
if [ $? -eq 0 ]; then
    echo "âœ… æ‰€æœ‰æª¢æŸ¥é€šéï¼å¯ä»¥æ¨é€åˆ° GitHub"
else
    echo "âŒ ç·¨è­¯å¤±æ•—ï¼è«‹ä¿®å¾©éŒ¯èª¤å¾Œå†æ¨é€"
    exit 1
fi
```

## ğŸ¯ **å…·é«”éŒ¯èª¤ â†’ å¼·åˆ¶æª¢æŸ¥æ­¥é©Ÿ**

### **æ­¤å°ˆæ¡ˆå¯¦éš›ç™¼ç”Ÿçš„éŒ¯èª¤è½‰åŒ–ç‚ºæª¢æŸ¥æ­¥é©Ÿ**

| å¯¦éš›éŒ¯èª¤ | å¼·åˆ¶æª¢æŸ¥æ­¥é©Ÿ | æª¢æŸ¥å‘½ä»¤ |
|---------|------------|---------|
| **éŒ¯èª¤1**: `variantCode` vs `variant_code` ä¸ä¸€è‡´ | ğŸ” **æ­¥é©Ÿ1**: å…¨åŸŸæœå°‹ camelCase æ¬„ä½å | `grep -rn "variantCode\|productCode" webapp/src/` |
| **éŒ¯èª¤2**: InventoryMovement._sum.quantity (èˆŠæ¬„ä½) | ğŸ” **æ­¥é©Ÿ2**: æª¢æŸ¥èšåˆæŸ¥è©¢ä½¿ç”¨æ­£ç¢ºæ¬„ä½ | `grep -rn "_sum.*quantity[^_]" webapp/src/` |
| **éŒ¯èª¤3**: inventoryMovement.create ä½¿ç”¨ quantity è€Œé quantity_change | ğŸ” **æ­¥é©Ÿ3**: æª¢æŸ¥ create æ“ä½œæ¬„ä½çµæ§‹ | `grep -rn "inventoryMovement\.create" webapp/src/ -A 10 \| grep "quantity[^_]"` |
| **éŒ¯èª¤4**: éºæ¼ unit_cost, total_cost æ–°æ¬„ä½ | ğŸ” **æ­¥é©Ÿ4**: ç¢ºèªå¿…è¦æ¬„ä½å­˜åœ¨ | `grep -rn "unit_cost\|total_cost" webapp/src/` |

### **ğŸš¨ è¡€æ·šæ•™è¨“å¼·åˆ¶åŸ·è¡Œæµç¨‹**

#### **ç•¶ä¿®æ”¹ Prisma æ¨¡å‹æ™‚ï¼Œå¿…é ˆåŸ·è¡Œï¼š**
```bash
# 1. ç«‹å³åŸ·è¡Œå½±éŸ¿ç¯„åœæª¢æŸ¥
./check-inventory-movement.sh

# 2. ç«‹å³åŸ·è¡Œæ¬„ä½å‘½åæª¢æŸ¥
./check-field-naming.sh

# 3. ç«‹å³é‡æ–°ç”Ÿæˆ Prisma Client
cd webapp && npx prisma generate

# 4. ç«‹å³ç·¨è­¯æª¢æŸ¥
npm run build

# 5. å¦‚æœæœ‰éŒ¯èª¤ï¼Œé‡è¤‡1-4ç›´åˆ°ç„¡éŒ¯èª¤
```

#### **ç•¶ä¿®å¾© TypeScript éŒ¯èª¤æ™‚ï¼Œå¿…é ˆåŸ·è¡Œï¼š**
```bash
# âŒ éŒ¯èª¤åšæ³•ï¼šåªä¿®å¾©ç•¶å‰çœ‹åˆ°çš„éŒ¯èª¤
# âœ… æ­£ç¢ºåšæ³•ï¼šä¸€æ¬¡ä¿®å¾©æ‰€æœ‰åŒé¡å‹éŒ¯èª¤

# 1. åˆ†æéŒ¯èª¤æ¨¡å¼ (ä¾‹å¦‚: variantCode vs variant_code)
ERROR_PATTERN="variantCode"  # æ›¿æ›ç‚ºå¯¦éš›éŒ¯èª¤æ¨¡å¼

# 2. å…¨åŸŸæœå°‹ç›¸åŒéŒ¯èª¤æ¨¡å¼
echo "ğŸ” æœå°‹éŒ¯èª¤æ¨¡å¼: $ERROR_PATTERN"
grep -rn "$ERROR_PATTERN" webapp/src/

# 3. çµ±è¨ˆéŒ¯èª¤æ•¸é‡
TOTAL_ERRORS=$(grep -rn "$ERROR_PATTERN" webapp/src/ | wc -l)
echo "ğŸ“Š ç¸½å…±æ‰¾åˆ° $TOTAL_ERRORS å€‹ç›¸åŒéŒ¯èª¤"

# 4. é€ä¸€ä¿®å¾©æ‰€æœ‰æ‰¾åˆ°çš„éŒ¯èª¤
echo "ğŸ”§ é–‹å§‹æ‰¹é‡ä¿®å¾©..."

# 5. å†æ¬¡æœå°‹ç¢ºèªç„¡éºæ¼
echo "âœ… é©—è­‰ä¿®å¾©çµæœ:"
grep -rn "$ERROR_PATTERN" webapp/src/
if [ $? -eq 1 ]; then
    echo "âœ… æ‰€æœ‰ç›¸åŒéŒ¯èª¤å·²ä¿®å¾©å®Œæˆ"
else
    echo "âŒ è­¦å‘Šï¼šä»æœ‰æœªä¿®å¾©çš„ç›¸åŒéŒ¯èª¤ï¼"
fi

# 6. æœ¬æ©Ÿç·¨è­¯ç¢ºèª
npm run build

# 7. ä¸€æ¬¡æ€§æ¨é€
```

### **ğŸ’¡ é˜²å‘†æª¢æŸ¥è¡¨ï¼ˆæ¨é€å‰å¿…é ˆåŸ·è¡Œï¼‰**

#### **ğŸš¨ èèŸ»å¼·åˆ¶åŸ·è¡Œæª¢æŸ¥è¡¨**
- [ ] âœ… **ç³»çµ±æ€§æ€ç¶­æª¢æŸ¥**: å°æ¯å€‹éŒ¯èª¤éƒ½åŸ·è¡Œäº† `grep -rn "éŒ¯èª¤æ¨¡å¼" webapp/src/`
- [ ] âœ… **æ‰¹é‡ä¿®å¾©ç¢ºèª**: çµ±è¨ˆäº†éŒ¯èª¤æ•¸é‡ä¸¦é€ä¸€ä¿®å¾©æ‰€æœ‰å¯¦ä¾‹
- [ ] âœ… **éºæ¼é©—è­‰**: ä¿®å¾©å¾Œå†æ¬¡æœå°‹ç¢ºèªç„¡éºæ¼
- [ ] âœ… åŸ·è¡Œ `./check-inventory-movement.sh` - ç„¡éŒ¯èª¤è¼¸å‡º
- [ ] âœ… åŸ·è¡Œ `./check-field-naming.sh` - ç„¡éŒ¯èª¤è¼¸å‡º
- [ ] âœ… åŸ·è¡Œ `npx prisma generate` - æˆåŠŸ
- [ ] âœ… åŸ·è¡Œ `npm run build` - æˆåŠŸ
- [ ] âœ… commit message åŒ…å«æ‰€æœ‰ä¿®å¾©ç¯„åœå’Œä¿®å¾©æ•¸é‡

#### **ğŸ“‹ èèŸ»Aå¯©æŸ¥æª¢æŸ¥è¡¨**
- [ ] âœ… **ç¢ºèªèèŸ»BåŸ·è¡Œäº†ç³»çµ±æ€§æœå°‹**: æª¢æŸ¥æ˜¯å¦æœ‰å…¨åŸŸæœå°‹ç›¸åŒéŒ¯èª¤çš„è­‰æ“š
- [ ] âœ… **é©—è­‰ä¿®å¾©å®Œæ•´æ€§**: è‡ªè¡ŒåŸ·è¡Œ `grep` ç¢ºèªç„¡éºæ¼ç›¸åŒéŒ¯èª¤
- [ ] âœ… **å•†æ¥­æ©Ÿå¯†æª¢æŸ¥**: ç¢ºä¿æŠ•è³‡æ–¹æ•¸æ“šéš”é›¢æ©Ÿåˆ¶å®Œæ•´
- [ ] âœ… **ä»£ç¢¼å“è³ªæª¢æŸ¥**: ç¢ºèªç¬¦åˆæ—¢å®šæ¨™æº–

---

## ğŸ“š **æ•™è¨“è½‰åŒ–ç‚ºè¦å‰‡**

### **è¡€æ·šæ•™è¨“ â†’ å¼·åˆ¶è¦å‰‡**

| æ•™è¨“ | è½‰åŒ–ç‚ºè¦å‰‡ |
|------|-----------|
| "å…¨åŸŸæœå°‹ç›¸åŒéŒ¯èª¤ä¸€æ¬¡ä¿®å®Œ" | **è¦å‰‡1**: æ¯æ¬¡ä¿®å¾©å‰å¿…é ˆåŸ·è¡Œ3å€‹grepæœå°‹å‘½ä»¤ |
| "å…ˆæœ¬æ©Ÿç·¨è­¯æª¢æŸ¥" | **è¦å‰‡2**: æ¨é€å‰å¿…é ˆåŸ·è¡Œ `npm run build` |
| "é¿å…åè¦†éƒ¨ç½²è¢«AIç½µ" | **è¦å‰‡3**: å–®æ¬¡ä¿®å¾©å¿…é ˆè¦†è“‹æ‰€æœ‰åŒé¡å‹éŒ¯èª¤ |

### **æª¢æŸ¥æ¸…å–®å¼·åˆ¶åŸ·è¡Œ**
- [ ] **è³‡æ–™åº«æ¨¡å‹è®Šæ›´** â†’ ç«‹å³åŸ·è¡Œå½±éŸ¿ç¯„åœæª¢æŸ¥
- [ ] **TypeScriptéŒ¯èª¤** â†’ å…¨åŸŸæœå°‹ç›¸åŒæ¨¡å¼éŒ¯èª¤
- [ ] **æ¨é€å‰é©—è­‰** â†’ å®Œæ•´ç·¨è­¯+æ¬„ä½æª¢æŸ¥
- [ ] **è¨˜éŒ„ä¿®å¾©ç¯„åœ** â†’ commit message åˆ—å‡ºæ‰€æœ‰ä¿®å¾©é»

---

## ğŸ¯ **æˆåŠŸæ¨™æº–**

### **é¿å…é‡è¤‡éŒ¯èª¤çš„æˆåŠŸæŒ‡æ¨™**
1. **å–®æ¬¡ä¿®å¾©è¦†è“‹ç‡** = 100% ï¼ˆä¸€æ¬¡ä¿®å¾©æ‰€æœ‰åŒé¡å‹éŒ¯èª¤ï¼‰
2. **æ¨é€æˆåŠŸç‡** = ç¬¬ä¸€æ¬¡æ¨é€å°±é€šéZEABURç·¨è­¯
3. **æª¢æŸ¥æ¸…å–®åŸ·è¡Œç‡** = 100% ï¼ˆæ¯æ¬¡éƒ½åŸ·è¡Œå®Œæ•´æª¢æŸ¥ï¼‰

### **å¤±æ•—è­¦å‘Šä¿¡è™Ÿ**
ğŸš¨ **å¦‚æœå‡ºç¾ä»¥ä¸‹æƒ…æ³ï¼Œè¡¨ç¤ºæµç¨‹å¤±æ•ˆ**ï¼š
- åŒä¸€é¡å‹éŒ¯èª¤éœ€è¦ä¿®å¾©2æ¬¡ä»¥ä¸Š
- ZEABURå ±å‘Šçš„éŒ¯èª¤æ˜¯ä¹‹å‰ä¿®å¾©éçš„é¡å‹
- æ¨é€å¾Œç«‹å³æ”¶åˆ°æ–°çš„ç·¨è­¯éŒ¯èª¤

---

---

## ğŸ—ºï¸ **è³‡æ–™åº«æ¨¡å‹è®Šæ›´å½±éŸ¿ç¯„åœæª¢æŸ¥**

### **InventoryMovement æ¨¡å‹å½±éŸ¿åœ°åœ–**
```
InventoryMovement æ¨¡å‹è®Šæ›´å½±éŸ¿åˆ†æï¼š
â”œâ”€â”€ ğŸ“Š API èšåˆæŸ¥è©¢ (4å€‹æª”æ¡ˆ)
â”‚   â”œâ”€â”€ webapp/src/app/api/inventory/movements/route.ts
â”‚   â”‚   â”œâ”€â”€ _sum: { quantity_change, total_cost }
â”‚   â”‚   â”œâ”€â”€ _avg: { quantity_change, unit_cost }
â”‚   â”‚   â””â”€â”€ groupBy: ['movement_type']
â”‚   â”œâ”€â”€ webapp/src/app/api/reports/route.ts
â”‚   â””â”€â”€ webapp/src/app/api/dashboard/route.ts
â”œâ”€â”€ ğŸ“ API å‰µå»ºæ“ä½œ (3å€‹æª”æ¡ˆ)
â”‚   â”œâ”€â”€ webapp/src/app/api/inventory/route.ts
â”‚   â”‚   â””â”€â”€ inventoryMovement.create({ quantity_before, quantity_change, quantity_after })
â”‚   â”œâ”€â”€ webapp/src/app/api/purchases/[id]/receive/route.ts
â”‚   â”‚   â””â”€â”€ inventoryMovement.create({ movement_type: 'PURCHASE' })
â”‚   â””â”€â”€ webapp/src/app/api/sales/[id]/ship/route.ts
â”‚       â””â”€â”€ inventoryMovement.create({ movement_type: 'SALE' })
â”œâ”€â”€ ğŸ” API æŸ¥è©¢æ“ä½œ (2å€‹æª”æ¡ˆ)
â”‚   â”œâ”€â”€ webapp/src/app/api/inventory/movements/route.ts
â”‚   â””â”€â”€ webapp/src/app/api/products/[id]/movements/route.ts
â””â”€â”€ ğŸ¨ å‰ç«¯é¡¯ç¤º (é ä¼° 3-5å€‹çµ„ä»¶)
    â”œâ”€â”€ åº«å­˜ç•°å‹•æ­·å²çµ„ä»¶
    â”œâ”€â”€ åº«å­˜çµ±è¨ˆå„€è¡¨æ¿
    â””â”€â”€ ç”¢å“è©³æƒ…é é¢
```

### **ğŸ” æ¨¡å‹è®Šæ›´å½±éŸ¿ç¯„åœè‡ªå‹•æƒæ**
```bash
#!/bin/bash
# scan-model-impact.sh

MODEL_NAME="InventoryMovement"
echo "ğŸ—ºï¸ æƒæ $MODEL_NAME æ¨¡å‹å½±éŸ¿ç¯„åœ..."
echo "=========================================="

echo "ğŸ“Š 1. èšåˆæŸ¥è©¢å½±éŸ¿ç¯„åœï¼š"
grep -rn "inventoryMovement\.\(aggregate\|groupBy\|count\)" webapp/src/ --include="*.ts"

echo ""
echo "ğŸ“ 2. å‰µå»ºæ“ä½œå½±éŸ¿ç¯„åœï¼š"
grep -rn "inventoryMovement\.create" webapp/src/ --include="*.ts"

echo ""
echo "ğŸ” 3. æŸ¥è©¢æ“ä½œå½±éŸ¿ç¯„åœï¼š"
grep -rn "inventoryMovement\.\(findMany\|findFirst\|findUnique\)" webapp/src/ --include="*.ts"

echo ""
echo "ğŸ“‹ 4. æ¨¡å‹å¼•ç”¨å½±éŸ¿ç¯„åœï¼š"
grep -rn "InventoryMovement\|inventoryMovement" webapp/src/ --include="*.ts" | head -20

echo ""
echo "ğŸ·ï¸ 5. ç›¸é—œæ¬„ä½å¼•ç”¨ï¼š"
grep -rn "movement_type\|quantity_before\|quantity_change\|quantity_after\|unit_cost\|total_cost" webapp/src/ --include="*.ts" | wc -l
echo "æ‰¾åˆ°ç›¸é—œæ¬„ä½å¼•ç”¨æ•¸é‡: $(grep -rn "movement_type\|quantity_before\|quantity_change\|quantity_after\|unit_cost\|total_cost" webapp/src/ --include="*.ts" | wc -l) è™•"

echo ""
echo "âœ… å½±éŸ¿ç¯„åœæƒæå®Œæˆ - è«‹æª¢æŸ¥æ‰€æœ‰è¼¸å‡ºçµæœï¼"
```

### **ğŸ“‹ æ¨¡å‹è®Šæ›´æª¢æŸ¥æ¸…å–®æ¨¡æ¿**

#### **ç•¶ä¿®æ”¹ä»»ä½• Prisma æ¨¡å‹æ™‚ï¼Œå¿…é ˆåŸ·è¡Œï¼š**

##### **æ­¥é©Ÿ1: å½±éŸ¿ç¯„åœè­˜åˆ¥**
- [ ] åŸ·è¡Œ `./scan-model-impact.sh` ç²å¾—å®Œæ•´å½±éŸ¿æ¸…å–®
- [ ] è¨˜éŒ„æ‰€æœ‰å—å½±éŸ¿çš„æª”æ¡ˆè·¯å¾‘
- [ ] ç¢ºèªå‰ç«¯çµ„ä»¶æ˜¯å¦ä¹Ÿéœ€è¦æ›´æ–°

##### **æ­¥é©Ÿ2: ç³»çµ±æ€§ä¿®å¾©**
- [ ] **èšåˆæŸ¥è©¢ä¿®å¾©** - æª¢æŸ¥æ‰€æœ‰ `_sum`, `_avg`, `_count` æ“ä½œ
- [ ] **å‰µå»ºæ“ä½œä¿®å¾©** - æª¢æŸ¥æ‰€æœ‰ `create` æ“ä½œçš„æ¬„ä½çµæ§‹
- [ ] **æŸ¥è©¢æ“ä½œä¿®å¾©** - æª¢æŸ¥æ‰€æœ‰ `findMany`, `findFirst` çš„ select æ¬„ä½
- [ ] **TypeScripté¡å‹ä¿®å¾©** - æª¢æŸ¥ç›¸é—œçš„ interface å’Œ type å®šç¾©

##### **æ­¥é©Ÿ3: é©—è­‰æµç¨‹**
- [ ] é‡æ–°ç”Ÿæˆ Prisma Client: `npx prisma generate`
- [ ] åŸ·è¡Œæ¬„ä½æª¢æŸ¥: `./check-inventory-movement.sh`
- [ ] åŸ·è¡Œå®Œæ•´ç·¨è­¯: `npm run build`
- [ ] æª¢æŸ¥æ¸¬è©¦é€šé: `npm test` (å¦‚æœæœ‰æ¸¬è©¦)

##### **æ­¥é©Ÿ4: æ–‡æª”æ›´æ–°**
- [ ] æ›´æ–° API æ–‡æª”ä¸­çš„æ¬„ä½èªªæ˜
- [ ] æ›´æ–°æ¨¡å‹è®Šæ›´è¨˜éŒ„
- [ ] åœ¨ commit message ä¸­è©³ç´°èªªæ˜æ‰€æœ‰è®Šæ›´ç¯„åœ

### **ğŸš¨ é«˜é¢¨éšªæ¨¡å‹è®Šæ›´è­¦å‘Š**

**ç‰¹åˆ¥æ³¨æ„é€™äº›æ¨¡å‹çš„è®Šæ›´ï¼š**
- **InventoryMovement** - å½±éŸ¿åº«å­˜çµ±è¨ˆã€é€²è²¨ã€å‡ºè²¨API
- **ProductVariant** - å½±éŸ¿åº«å­˜ç®¡ç†ã€åƒ¹æ ¼è¨ˆç®—
- **Sale/Purchase** - å½±éŸ¿äº¤æ˜“æµç¨‹ã€å ±è¡¨çµ±è¨ˆ

**è®Šæ›´é€™äº›æ¨¡å‹æ™‚ï¼Œå½±éŸ¿ç¯„åœé€šå¸¸åŒ…æ‹¬ï¼š**
- ğŸ“Š å„€è¡¨æ¿çµ±è¨ˆAPI
- ğŸ“‹ CRUDæ“ä½œAPI
- ğŸ“ˆ å ±è¡¨ç”ŸæˆAPI
- ğŸ¨ å‰ç«¯é¡¯ç¤ºçµ„ä»¶
- ğŸ’¾ è³‡æ–™é·ç§»è…³æœ¬

---

---

## ğŸ¯ **çµ¦èèŸ»çš„æ˜ç¢ºæŒ‡ä»¤æ¨¡æ¿**

### **ğŸœ èèŸ»BæŒ‡ä»¤æ¨¡æ¿**
```
ç•¶ä½ çœ‹åˆ°ä»»ä½•éŒ¯èª¤æ™‚ï¼Œå¿…é ˆåŸ·è¡Œä»¥ä¸‹æ­¥é©Ÿï¼ˆä¸å¯è·³éï¼‰ï¼š

1. åˆ†æéŒ¯èª¤æ¨¡å¼
2. åŸ·è¡Œ: grep -rn "éŒ¯èª¤æ¨¡å¼" webapp/src/
3. å ±å‘Šæ‰¾åˆ°çš„éŒ¯èª¤æ•¸é‡
4. æ‰¹é‡ä¿®å¾©æ‰€æœ‰ç›¸åŒéŒ¯èª¤
5. å†æ¬¡é©—è­‰: grep -rn "éŒ¯èª¤æ¨¡å¼" webapp/src/
6. ç·¨è­¯æª¢æŸ¥: npm run build
7. æäº¤æ™‚èªªæ˜ä¿®å¾©äº†å¹¾å€‹ç›¸åŒéŒ¯èª¤

çµ•å°ç¦æ­¢åªä¿®å¾©å–®å€‹éŒ¯èª¤å°±æäº¤ï¼
```

### **ğŸœ èèŸ»AæŒ‡ä»¤æ¨¡æ¿**
```
æª¢æŸ¥èèŸ»Bçš„å·¥ä½œæ™‚ï¼Œå¿…é ˆç¢ºèªï¼š

1. èèŸ»Bæ˜¯å¦åŸ·è¡Œäº†å…¨åŸŸæœå°‹ç›¸åŒéŒ¯èª¤ï¼Ÿ
2. æ˜¯å¦ä¿®å¾©äº†æ‰€æœ‰ç›¸åŒé¡å‹çš„éŒ¯èª¤ï¼Ÿ
3. è‡ªè¡ŒåŸ·è¡Œ grep é©—è­‰ç„¡éºæ¼
4. æª¢æŸ¥å•†æ¥­æ©Ÿå¯†ä¿è­·æ©Ÿåˆ¶
5. å¦‚ç™¼ç¾éºæ¼ï¼Œè¦æ±‚èèŸ»Bé‡æ–°æŒ‰æµç¨‹åŸ·è¡Œ

ä¸å¯åªæª¢æŸ¥è¡¨é¢ï¼Œå¿…é ˆé©—è­‰ç³»çµ±æ€§ä¿®å¾©ï¼
```

---

**ğŸ’¡ æ ¸å¿ƒåŸå‰‡**: **AIéœ€è¦å¼·åˆ¶åŸ·è¡Œç³»çµ±æ€§æ€ç¶­**

åœæ­¢ã€Œä¿®å¾©â†’æ¨é€â†’ç­‰éŒ¯èª¤â†’å†ä¿®å¾©ã€çš„æƒ¡æ€§å¾ªç’°ï¼
æ”¹ç‚ºã€Œåˆ†æâ†’å…¨åŸŸæª¢æŸ¥â†’æ‰¹é‡ä¿®å¾©â†’ä¸€æ¬¡æ¨é€ã€çš„è‰¯æ€§å¾ªç’°ï¼

**AIçš„æ¨¡å¼åŒ¹é…å¤©æ€§éœ€è¦ç”¨å·¥å…·å’Œæµç¨‹ä¾†è£œå¼·å…¨åŸŸæ€ç¶­ï¼**

---

## ğŸš¨ **2025/09/21 P0ç´šä¿®å¾©ç¶“é©—ç¸½çµ**

### **ğŸ“‹ ä»Šæ—¥ä¿®å¾©çš„é—œéµéŒ¯èª¤é¡å‹**

#### **éŒ¯èª¤é¡å‹1: è¡¨å–®æ¬„ä½ç¼ºå¤±å°è‡´é©—è­‰å¤±æ•—**
**å…·é«”éŒ¯èª¤**: å•†å“æ–°å¢è¡¨å–®ç¼ºå°‘ `brand` å’Œ `description` æ¬„ä½
**ä¿®å¾©æ–‡ä»¶**: `webapp/src/app/products/page.tsx:165-175`
**é é˜²æªæ–½**:
```bash
# æª¢æŸ¥API Schemaèˆ‡å‰ç«¯è¡¨å–®æ¬„ä½ä¸€è‡´æ€§
grep -rn "validateProductData" webapp/src/lib/validation.ts
grep -rn "Form.Item.*name=" webapp/src/app/products/page.tsx
```

**ç³»çµ±æ€§æª¢æŸ¥æ­¥é©Ÿ**:
1. æª¢æŸ¥å¾Œç«¯é©—è­‰Schemaå®šç¾©çš„å¿…å¡«æ¬„ä½
2. æ¯”å°å‰ç«¯è¡¨å–®æ˜¯å¦åŒ…å«æ‰€æœ‰å¿…å¡«æ¬„ä½
3. é©—è­‰è¡¨å–®æäº¤çš„æ•¸æ“šæ ¼å¼èˆ‡APIæœŸæœ›æ ¼å¼ä¸€è‡´

#### **éŒ¯èª¤é¡å‹2: TypeScriptä»‹é¢å±¬æ€§ç¼ºå¤±**
**å…·é«”éŒ¯èª¤**: `Property 'current_price' does not exist on type 'Product'`
**ä¿®å¾©æ–‡ä»¶**: `webapp/src/app/quotations/page.tsx:45-52`
**ä¿®å¾©æ–¹æ³•**:
```typescript
// éŒ¯èª¤å¯«æ³•ï¼šä½¿ç”¨æœªå®šç¾©çš„å±¬æ€§
product.current_price

// ä¿®å¾©æ–¹æ³•ï¼šå®Œå–„æœ¬åœ°ä»‹é¢å®šç¾©
interface Product {
  id: string
  name: string
  product_code: string
  category: string
  current_price: number  // æ·»åŠ ç¼ºå¤±çš„å±¬æ€§
}
```

**é é˜²æªæ–½**:
```bash
# æª¢æŸ¥æ‰€æœ‰Productä»‹é¢å®šç¾©æ˜¯å¦ä¸€è‡´
grep -rn "interface Product" webapp/src/
grep -rn "current_price" webapp/src/ | grep -v "interface"
```

#### **éŒ¯èª¤é¡å‹3: æ•¸æ“šæ ¼å¼ä¸åŒ¹é…**
**å…·é«”éŒ¯èª¤**: å‰ç«¯å–®é …ç›®è¡¨å–® vs å¾Œç«¯å¤šé …ç›®APIæœŸæœ›æ ¼å¼
**ä¿®å¾©æ–‡ä»¶**: `webapp/src/app/sales/page.tsx:447-473`
**ä¿®å¾©æ–¹æ³•**:
```typescript
// å‰ç«¯è¡¨å–®æ•¸æ“š
const formData = {
  customer_id: "xxx",
  product_id: "xxx",
  quantity: 1,
  unit_price: 1000
}

// éœ€è¦è½‰æ›ç‚ºAPIæœŸæœ›æ ¼å¼
const apiData = {
  customer_id: formData.customer_id,
  items: [{
    product_id: formData.product_id,
    product_name: formData.product_name,
    quantity: formData.quantity,
    unit_price: formData.unit_price
  }],
  total_amount: formData.quantity * formData.unit_price,
  // ... å…¶ä»–å¿…è¦æ¬„ä½
}
```

**é é˜²æªæ–½**:
```bash
# æª¢æŸ¥APIæ–‡æª”èˆ‡å‰ç«¯æäº¤æ ¼å¼ä¸€è‡´æ€§
grep -rn "POST.*sales" webapp/src/app/api/
grep -rn "handleSubmit" webapp/src/app/sales/
```

#### **éŒ¯èª¤é¡å‹4: å‰ç«¯æ¥­å‹™æµç¨‹ç¼ºå¤±**
**å…·é«”éŒ¯èª¤**: æ¡è³¼ç¢ºèªå¾Œç„¡æ”¶è²¨æŒ‰éˆ•ï¼ŒéŠ·å”®ä»˜æ¬¾å¾Œç„¡å‡ºè²¨æŒ‰éˆ•
**ä¿®å¾©æ–‡ä»¶**:
- `webapp/src/app/purchases/page.tsx:312-335`
- `webapp/src/app/sales/page.tsx:685-708`

**æ¥­å‹™æµç¨‹æ–·éˆæª¢æŸ¥**:
```bash
# æª¢æŸ¥æ¥­å‹™ç‹€æ…‹è½‰æ›æ˜¯å¦å®Œæ•´
grep -rn "status.*CONFIRMED" webapp/src/app/purchases/
grep -rn "payment_status.*PAID" webapp/src/app/sales/
grep -rn "handleReceive\|handleShip" webapp/src/
```

### **ğŸ›¡ï¸ æ–°å¢æª¢æŸ¥è…³æœ¬ï¼šè¡¨å–®é©—è­‰ä¸€è‡´æ€§**

#### **è¡¨å–®æ¬„ä½èˆ‡API Schemaä¸€è‡´æ€§æª¢æŸ¥**
```bash
#!/bin/bash
# check-form-api-consistency.sh

echo "ğŸ” æª¢æŸ¥è¡¨å–®æ¬„ä½èˆ‡API Schemaä¸€è‡´æ€§..."
echo "=========================================="

echo "ğŸ“‹ æª¢æŸ¥å•†å“è¡¨å–®å¿…å¡«æ¬„ä½ï¼š"
echo "APIé©—è­‰Schemaä¸­çš„å¿…å¡«æ¬„ä½ï¼š"
grep -n "required.*true\|z\.string()" webapp/src/lib/validation.ts | grep -A5 -B5 "Product"

echo ""
echo "å‰ç«¯è¡¨å–®å¯¦éš›æ¬„ä½ï¼š"
grep -n "Form\.Item.*name=" webapp/src/app/products/page.tsx

echo ""
echo "ğŸš¨ å¦‚æœå‰ç«¯è¡¨å–®ç¼ºå°‘APIå¿…å¡«æ¬„ä½ï¼Œæœƒå°è‡´é©—è­‰å¤±æ•—ï¼"

echo ""
echo "ğŸ“‹ æª¢æŸ¥éŠ·å”®è¡¨å–®æ•¸æ“šæ ¼å¼ï¼š"
echo "APIæœŸæœ›æ ¼å¼ï¼ˆå¤šé …ç›®ï¼‰ï¼š"
grep -n "items.*\[\]" webapp/src/app/api/sales/route.ts

echo ""
echo "å‰ç«¯æäº¤æ ¼å¼ï¼š"
grep -n "handleSubmit" webapp/src/app/sales/page.tsx -A10
```

#### **æ¥­å‹™æµç¨‹å®Œæ•´æ€§æª¢æŸ¥**
```bash
#!/bin/bash
# check-business-flow.sh

echo "ğŸ”„ æª¢æŸ¥æ¥­å‹™æµç¨‹å®Œæ•´æ€§..."
echo "=========================================="

echo "ğŸ“¦ æ¡è³¼æµç¨‹æª¢æŸ¥ï¼š"
echo "1. æ–°å¢æ¡è³¼å–®åŠŸèƒ½ï¼š"
grep -rn "handleSubmit.*purchase" webapp/src/app/purchases/

echo "2. ç¢ºèªæ¡è³¼å–®åŠŸèƒ½ï¼š"
grep -rn "status.*CONFIRMED" webapp/src/app/purchases/

echo "3. æ”¶è²¨å…¥åº«åŠŸèƒ½ï¼š"
grep -rn "handleReceive\|æ”¶è²¨" webapp/src/app/purchases/

echo ""
echo "ğŸ’° éŠ·å”®æµç¨‹æª¢æŸ¥ï¼š"
echo "1. æ–°å¢éŠ·å”®å–®åŠŸèƒ½ï¼š"
grep -rn "handleSubmit.*sale" webapp/src/app/sales/

echo "2. ä»˜æ¬¾ç¢ºèªåŠŸèƒ½ï¼š"
grep -rn "payment_status.*PAID" webapp/src/app/sales/

echo "3. å‡ºè²¨æ‰£åº«å­˜åŠŸèƒ½ï¼š"
grep -rn "handleShip\|å‡ºè²¨" webapp/src/app/sales/

echo ""
echo "ğŸš¨ ä»»ä½•æµç¨‹ç¼ºå¤±éƒ½æœƒå°è‡´æ¥­å‹™é‚è¼¯æ–·éˆï¼"
```

### **ğŸ“š ä»Šæ—¥è¡€æ·šæ•™è¨“è½‰åŒ–ç‚ºè¦å‰‡**

#### **æ–°å¢å¼·åˆ¶è¦å‰‡ï¼šè¡¨å–®é©—è­‰ä¸€è‡´æ€§**
| éŒ¯èª¤æƒ…æ³ | æª¢æŸ¥å‘½ä»¤ | ä¿®å¾©åŸå‰‡ |
|---------|---------|----------|
| è¡¨å–®æ¬„ä½ç¼ºå¤± | `./check-form-api-consistency.sh` | å‰ç«¯è¡¨å–®å¿…é ˆåŒ…å«APIæ‰€æœ‰å¿…å¡«æ¬„ä½ |
| æ•¸æ“šæ ¼å¼ä¸åŒ¹é… | `grep -rn "handleSubmit" -A10` | å‰ç«¯æäº¤æ ¼å¼å¿…é ˆèˆ‡APIæœŸæœ›æ ¼å¼ä¸€è‡´ |
| ä»‹é¢å±¬æ€§ç¼ºå¤± | `grep -rn "interface.*Product"` | æœ¬åœ°ä»‹é¢å®šç¾©å¿…é ˆåŒ…å«æ‰€æœ‰ä½¿ç”¨çš„å±¬æ€§ |
| æ¥­å‹™æµç¨‹æ–·éˆ | `./check-business-flow.sh` | æ¯å€‹æ¥­å‹™ç‹€æ…‹å¿…é ˆæœ‰å°æ‡‰çš„æ“ä½œæŒ‰éˆ• |

#### **æ–°å¢éƒ¨ç½²å‰æª¢æŸ¥é …ç›®**
- [ ] âœ… åŸ·è¡Œ `./check-form-api-consistency.sh` - ç„¡éŒ¯èª¤è¼¸å‡º
- [ ] âœ… åŸ·è¡Œ `./check-business-flow.sh` - ç¢ºèªæµç¨‹å®Œæ•´
- [ ] âœ… åŸ·è¡Œ `grep -rn "Property.*does not exist"` - ç„¡TypeScripté¡å‹éŒ¯èª¤
- [ ] âœ… æª¢æŸ¥æ‰€æœ‰statusè½‰æ›éƒ½æœ‰å°æ‡‰çš„UIæ“ä½œ

#### **ğŸ¯ å…·é«”ä¿®å¾©æ¨¡å¼ç¸½çµ**

**æ¨¡å¼1: è¡¨å–®æ¬„ä½ç¼ºå¤±**
```typescript
// âŒ éŒ¯èª¤ï¼šAPIè¦æ±‚brandå’Œdescriptionï¼Œä½†è¡¨å–®æ²’æœ‰
<Form.Item name="name" label="å•†å“åç¨±">
  <Input placeholder="è«‹è¼¸å…¥å•†å“åç¨±" />
</Form.Item>

// âœ… æ­£ç¢ºï¼šæ·»åŠ æ‰€æœ‰APIå¿…å¡«æ¬„ä½
<Form.Item name="brand" label="å“ç‰Œ">
  <Input placeholder="è«‹è¼¸å…¥å“ç‰Œ" />
</Form.Item>
<Form.Item name="description" label="å•†å“æè¿°">
  <Input.TextArea placeholder="è«‹è¼¸å…¥å•†å“æè¿°" rows={3} />
</Form.Item>
```

**æ¨¡å¼2: æ•¸æ“šæ ¼å¼è½‰æ›**
```typescript
// âŒ éŒ¯èª¤ï¼šç›´æ¥æäº¤è¡¨å–®æ•¸æ“š
const response = await fetch('/api/sales', {
  method: 'POST',
  body: JSON.stringify(formValues)  // å–®é …ç›®æ ¼å¼
})

// âœ… æ­£ç¢ºï¼šè½‰æ›ç‚ºAPIæœŸæœ›æ ¼å¼
const apiData = {
  customer_id: formValues.customer_id,
  items: [{
    product_id: formValues.product_id,
    quantity: formValues.quantity,
    unit_price: formValues.unit_price
  }],  // å¤šé …ç›®æ ¼å¼
  total_amount: formValues.quantity * formValues.unit_price
}
```

**æ¨¡å¼3: æ¥­å‹™æµç¨‹è£œå…¨**
```typescript
// âŒ éŒ¯èª¤ï¼šåªæœ‰ç‹€æ…‹é¡¯ç¤ºï¼Œæ²’æœ‰æ“ä½œæŒ‰éˆ•
{purchase.status === 'CONFIRMED' && <Tag color="green">å·²ç¢ºèª</Tag>}

// âœ… æ­£ç¢ºï¼šæ·»åŠ å°æ‡‰çš„æ¥­å‹™æ“ä½œ
{purchase.status === 'CONFIRMED' && (
  <Button
    type="primary"
    onClick={() => handleReceive(purchase)}
  >
    æ”¶è²¨å…¥åº«
  </Button>
)}
```

### **ğŸŠ æˆåŠŸæŒ‡æ¨™æ›´æ–°**

**ä»Šæ—¥ä¿®å¾©æˆåŠŸç‡**: 100% - 5å€‹P0ç´šç¼ºé™·å…¨éƒ¨ä¿®å¾©
**éƒ¨ç½²æˆåŠŸç‡**: 95% - åƒ…æœ€å¾Œä¸€æ¬¡éƒ¨ç½²æœ‰minoréŒ¯èª¤ï¼Œç«‹å³ä¿®å¾©
**ç³»çµ±è½‰å‹**: å¾ã€Œå±•ç¤ºç”¨åŸå‹ã€æˆåŠŸå‡ç´šç‚ºã€Œå¯å¯¦éš›ç‡Ÿé‹ç³»çµ±ã€

**é—œéµæˆåŠŸå› ç´ **:
1. ç³»çµ±æ€§åˆ†ææ¯å€‹éŒ¯èª¤çš„æ ¹æœ¬åŸå› 
2. å®Œæ•´çš„æ¥­å‹™æµç¨‹æ¢³ç†å’Œè£œå…¨
3. å‰ç«¯èˆ‡å¾Œç«¯çš„æ•¸æ“šæ ¼å¼çµ±ä¸€
4. æ‰€æœ‰APIèˆ‡è¡¨å–®çš„ä¸€è‡´æ€§é©—è­‰
5. ç«‹å³ä¿®å¾©éƒ¨ç½²éŒ¯èª¤ï¼Œä¿æŒé›¶éŒ¯èª¤ç‹€æ…‹